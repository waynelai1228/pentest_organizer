import json
import uuid
from enum import Enum
from model.vulnerability import Vulnerability


class Progress(Enum):
    NOT_STARTED = 1
    IN_PROGRESS = 2
    COMPLETED = 3

class TestPlanItem:
    def __init__(self, vulnerability: Vulnerability, progress: Progress, notes: str):
        self.item_id = uuid.uuid4()
        self.vulnerability = vulnerability
        self.progress = progress
        self.notes = notes
    def update_progress(self, progress: Progress):
        self.progress = progress
    def modify_notes(self, notes: str):
        self.notes = notes

    def __repr__(self):
        return "{\n" + \
               "    \"item id\": \"" + str(self.item_id) + "\",\n" + \
               "    \"vulnerability\": " + str(self.vulnerability) + ",\n" + \
               "    \"progress\": \"" + str(self.progress) + "\",\n" + \
               "    \"notes\": \"" + self.notes + "\"\n" + \
               "}"


if __name__ == "__main__":
    vulnerability = Vulnerability("SQL injection", "injecting SQL from an entry point to be executed", [], ["web", "SQL"])
    test_plan_item = TestPlanItem(vulnerability, Progress.NOT_STARTED, "hello world")

    print(test_plan_item)
